library(tidycensus)
library(tidyverse)
year <- (2022)
acs_type <- (acs1)
library(psrccensus)
library(tidycensus)
library(tidyverse)
year <- (2022)
acs_type <- "acs1"
table_order <- c("race",
"estimate_Region","moe_Region", "reliability_Region",
"estimate_King", "moe_King", "reliability_King",
"estimate_Kitsap", "moe_Kitsap", "reliability_Kitsap",
"estimate_Pierce", "moe_Pierce", "reliability_Pierce",
"estimate_Snohomish", "moe_Snohomish", "reliability_Snohomish")
# Pull Data
B03002_raw <- get_acs_recs(geography = 'county',
table.names = c('B03002'),
years = year,
counties = c("King", "Kitsap", "Pierce", "Snohomish"),
acs.type = acs_type)
B03002 <- B03002_raw %>%
filter(!grepl("Two races including Some other race", label),
!grepl("Two races excluding Some other race, and three or more races", label),
!grepl("!!Hispanic or Latino:!!", label)) %>%
mutate(race = case_when(grepl("^.*!White alone", label) ~ "White",
grepl("^.*!Black or African American alone", label) ~ "Black",
grepl("^.*!American Indian and Alaska Native alone", label) ~ "American Indian and Alaska Native",
grepl("^.*!Asian alone", label) ~ "Asian",
grepl("^.*!Native Hawaiian and Other Pacific Islander alone", label) ~ "Native Hawaiian and Other Pacific Islander",
grepl("^.*!Some other race alone", label) ~ "Some Other Race",
grepl("^.*!Two or more races:", label) ~ "Two or more races",
grepl("Estimate!!Total:!!Hispanic or Latino:", label) ~ "Hispanic or Latinx",
grepl("Estimate!!Total:!!Not Hispanic or Latino:", label) ~ "",
!is.na(label) ~ "")) %>%
filter(!race == "")
B03002$name <- gsub(" County", "", B03002$name)
# Group by County & R/E, order
table01 <- B03002 %>%
group_by(name,race) %>%
reframe(estimate = estimate,
moe = moe,
reliability = reliability) %>%
pivot_wider(names_from = name, values_from = estimate|moe|reliability) %>%
select(all_of(table_order))
View(table01)
file_vector <- c("export", acs_type, "table01")
# Export
file_name <- paste(file_vector, collapse = "_")
file_vector <- c("export", "table01", acs_type)
# Export
file_name <- paste(file_vector, collapse = "_")
library(psrccensus)
library(tidycensus)
library(tidyverse)
year <- (2022)
acs_type <- "acs1"
file_vector <- c("export", "table01", acs_type)
export_path <- ".Y:/Demog Profile/2024/Data/Table-01-pop-by-race"
table_order <- c("race",
"estimate_Region","moe_Region", "reliability_Region",
"estimate_King", "moe_King", "reliability_King",
"estimate_Kitsap", "moe_Kitsap", "reliability_Kitsap",
"estimate_Pierce", "moe_Pierce", "reliability_Pierce",
"estimate_Snohomish", "moe_Snohomish", "reliability_Snohomish")
# Export
file_name <- paste(file_vector, collapse = "_")
write.csv(table01, file = file.path(export_path, file_name, ".csv"), row.names = FALSE)
year <- (2022)
acs_type <- "acs1"
export_vector <- c("export", "table01", acs_type)
export_path <- "Y:/Demog Profile/2024/Data/Table-01-pop-by-race"
table_order <- c("race",
"estimate_Region","moe_Region", "reliability_Region",
"estimate_King", "moe_King", "reliability_King",
"estimate_Kitsap", "moe_Kitsap", "reliability_Kitsap",
"estimate_Pierce", "moe_Pierce", "reliability_Pierce",
"estimate_Snohomish", "moe_Snohomish", "reliability_Snohomish")
# Export
file_name <- paste(export_vector, collapse = "_")
write.csv(table01, file = file.path(export_path, file_name, ".csv"), row.names = FALSE)
write.csv(table01, file = file.path(export_path, file_name), row.names = FALSE)
export_vector <- c("export", "table01", acs_type, ".csv")
# Export
file_name <- paste(export_vector, collapse = "_")
write.csv(table01, file = file.path(export_path, file_name), row.names = FALSE)
library(psrccensus)
library(tidycensus)
library(tidyverse)
year <- (2022)
acs_type <- "acs1"
export_vector <- c("export", "table01", acs_type)
export_path <- "Y:/Demog Profile/2024/Data/Table-01-pop-by-race/export_table01_"
table_order <- c("race",
"estimate_Region","moe_Region", "reliability_Region",
"estimate_King", "moe_King", "reliability_King",
"estimate_Kitsap", "moe_Kitsap", "reliability_Kitsap",
"estimate_Pierce", "moe_Pierce", "reliability_Pierce",
"estimate_Snohomish", "moe_Snohomish", "reliability_Snohomish")
# Export
file_name <- paste(export_vector, collapse = "_")
file_name <- paste(file_name, ".csv", sep = "")
write.csv(table01, file = file.path(export_path, file_name), row.names = FALSE)
write.csv(table01, file = file.path(export_path), file_name, row.names = FALSE)
export_vector <- c("export", "table01", acs_type)
export_path <- "Y:/Demog Profile/2024/Data/Table-01-pop-by-race"
# Export
file_name <- paste(export_vector, collapse = "_")
file_name <- paste(file_name, ".csv", sep = "")
write.csv(table01, file = file.path(export_path), file_name, row.names = FALSE)
write.csv(table01, file = file.path(export_path, file_name), row.names = FALSE)
library(psrccensus)
library(tidycensus)
library(tidyverse)
year <- (2022)
acs_type <- "acs5"
export_vector <- c("export", "table01", acs_type)
export_path <- "Y:/Demog Profile/2024/Data/Table-01-pop-by-race"
table_order <- c("race",
"estimate_Region","moe_Region", "reliability_Region",
"estimate_King", "moe_King", "reliability_King",
"estimate_Kitsap", "moe_Kitsap", "reliability_Kitsap",
"estimate_Pierce", "moe_Pierce", "reliability_Pierce",
"estimate_Snohomish", "moe_Snohomish", "reliability_Snohomish")
# Pull Data
B03002_raw <- get_acs_recs(geography = 'county',
table.names = c('B03002'),
years = year,
counties = c("King", "Kitsap", "Pierce", "Snohomish"),
acs.type = acs_type)
# Summarize by race/ethnicity
B03002 <- B03002_raw %>%
filter(!grepl("Two races including Some other race", label),
!grepl("Two races excluding Some other race, and three or more races", label),
!grepl("!!Hispanic or Latino:!!", label)) %>%
mutate(race = case_when(grepl("^.*!White alone", label) ~ "White",
grepl("^.*!Black or African American alone", label) ~ "Black",
grepl("^.*!American Indian and Alaska Native alone", label) ~ "American Indian and Alaska Native",
grepl("^.*!Asian alone", label) ~ "Asian",
grepl("^.*!Native Hawaiian and Other Pacific Islander alone", label) ~ "Native Hawaiian and Other Pacific Islander",
grepl("^.*!Some other race alone", label) ~ "Some Other Race",
grepl("^.*!Two or more races:", label) ~ "Two or more races",
grepl("Estimate!!Total:!!Hispanic or Latino:", label) ~ "Hispanic or Latinx",
grepl("Estimate!!Total:!!Not Hispanic or Latino:", label) ~ "",
!is.na(label) ~ "")) %>%
filter(!race == "")
B03002$name <- gsub(" County", "", B03002$name)
# Group by County & R/E, order
table01 <- B03002 %>%
group_by(name,race) %>%
reframe(estimate = estimate,
moe = moe,
reliability = reliability) %>%
pivot_wider(names_from = name, values_from = estimate|moe|reliability) %>%
select(all_of(table_order))
# Export
file_name <- paste(export_vector, collapse = "_")
file_name <- paste(file_name, ".csv", sep = "")
write.csv(table01, file = file.path(export_path, file_name), row.names = FALSE)
library(psrccensus)
library(tidycensus)
library(tidyverse)
year <- (2022)
acs_type <- "acs1"
export_vector <- c("export", "table01", acs_type)
export_path <- "Y:/Demog Profile/2024/Data/Table-01-pop-by-race"
table_order <- c("race",
"estimate_Region","moe_Region", "rr_Region",
"estimate_King", "moe_King", "rr_King",
"estimate_Kitsap", "moe_Kitsap", "rr_Kitsap",
"estimate_Pierce", "moe_Pierce", "rr_Pierce",
"estimate_Snohomish", "moe_Snohomish", "rr_Snohomish")
# Pull Data
B03002_raw <- get_acs_recs(geography = 'county',
table.names = c('B03002'),
years = year,
counties = c("King", "Kitsap", "Pierce", "Snohomish"),
acs.type = acs_type)
# Summarize by race/ethnicity
B03002 <- B03002_raw %>%
filter(!grepl("Two races including Some other race", label),
!grepl("Two races excluding Some other race, and three or more races", label),
!grepl("!!Hispanic or Latino:!!", label)) %>%
mutate(race = case_when(grepl("^.*!White alone", label) ~ "White",
grepl("^.*!Black or African American alone", label) ~ "Black",
grepl("^.*!American Indian and Alaska Native alone", label) ~ "American Indian and Alaska Native",
grepl("^.*!Asian alone", label) ~ "Asian",
grepl("^.*!Native Hawaiian and Other Pacific Islander alone", label) ~ "Native Hawaiian and Other Pacific Islander",
grepl("^.*!Some other race alone", label) ~ "Some Other Race",
grepl("^.*!Two or more races:", label) ~ "Two or more races",
grepl("Estimate!!Total:!!Hispanic or Latino:", label) ~ "Hispanic or Latinx",
grepl("Estimate!!Total:!!Not Hispanic or Latino:", label) ~ "",
!is.na(label) ~ "")) %>%
filter(!race == "")
B03002$name <- gsub(" County", "", B03002$name)
# Group by County & R/E, order
table01 <- B03002 %>%
group_by(name,race) %>%
reframe(estimate = estimate,
moe = moe,
rr = reliability) %>%
pivot_wider(names_from = name, values_from = estimate|moe|rr) %>%
select(all_of(table_order))
View(table01)
file_name <- paste(export_vector, collapse = "_")
file_name <- paste(file_name, ".csv", sep = "")
write.csv(table01, file = file.path(export_path, file_name), row.names = FALSE)
library(psrccensus)
library(tidycensus)
library(tidyverse)
year <- (2022)
acs_type <- "acs5"
export_vector <- c("export", "table01", acs_type)
export_path <- "Y:/Demog Profile/2024/Data/Table-01-pop-by-race"
table_order <- c("race",
"estimate_Region","moe_Region", "rr_Region",
"estimate_King", "moe_King", "rr_King",
"estimate_Kitsap", "moe_Kitsap", "rr_Kitsap",
"estimate_Pierce", "moe_Pierce", "rr_Pierce",
"estimate_Snohomish", "moe_Snohomish", "rr_Snohomish")
# Pull Data
B03002_raw <- get_acs_recs(geography = 'county',
table.names = c('B03002'),
years = year,
counties = c("King", "Kitsap", "Pierce", "Snohomish"),
acs.type = acs_type)
# Summarize by race/ethnicity
B03002 <- B03002_raw %>%
filter(!grepl("Two races including Some other race", label),
!grepl("Two races excluding Some other race, and three or more races", label),
!grepl("!!Hispanic or Latino:!!", label)) %>%
mutate(race = case_when(grepl("^.*!White alone", label) ~ "White",
grepl("^.*!Black or African American alone", label) ~ "Black",
grepl("^.*!American Indian and Alaska Native alone", label) ~ "American Indian and Alaska Native",
grepl("^.*!Asian alone", label) ~ "Asian",
grepl("^.*!Native Hawaiian and Other Pacific Islander alone", label) ~ "Native Hawaiian and Other Pacific Islander",
grepl("^.*!Some other race alone", label) ~ "Some Other Race",
grepl("^.*!Two or more races:", label) ~ "Two or more races",
grepl("Estimate!!Total:!!Hispanic or Latino:", label) ~ "Hispanic or Latinx",
grepl("Estimate!!Total:!!Not Hispanic or Latino:", label) ~ "",
!is.na(label) ~ "")) %>%
filter(!race == "")
B03002$name <- gsub(" County", "", B03002$name)
# Group by County & R/E, order
table01 <- B03002 %>%
group_by(name,race) %>%
reframe(estimate = estimate,
moe = moe,
rr = reliability) %>%
pivot_wider(names_from = name, values_from = estimate|moe|rr) %>%
select(all_of(table_order))
# Export
file_name <- paste(export_vector, collapse = "_")
file_name <- paste(file_name, ".csv", sep = "")
write.csv(table01, file = file.path(export_path, file_name), row.names = FALSE)
View(table01)
export_vector <- c("export", year, acs_type)
# Export
file_name <- paste(export_vector, collapse = "_")
file_name <- paste(file_name, ".csv", sep = "")
write.csv(table01, file = file.path(export_path, file_name), row.names = FALSE)
write.csv(table01, file = file.path(export_path, file_name), row.names = FALSE)
library(psrccensus)
library(tidycensus)
library(tidyverse)
year <- (2022)
acs_type <- "acs1"
export_vector <- c("export", year, acs_type)
export_path <- "Y:/Demog Profile/2024/Data/Table-01-pop-by-race"
table_order <- c("race",
"estimate_Region","moe_Region", "rr_Region",
"estimate_King", "moe_King", "rr_King",
"estimate_Kitsap", "moe_Kitsap", "rr_Kitsap",
"estimate_Pierce", "moe_Pierce", "rr_Pierce",
"estimate_Snohomish", "moe_Snohomish", "rr_Snohomish")
# Pull Data
B03002_raw <- get_acs_recs(geography = 'county',
table.names = c('B03002'),
years = year,
counties = c("King", "Kitsap", "Pierce", "Snohomish"),
acs.type = acs_type)
# Summarize by race/ethnicity
B03002 <- B03002_raw %>%
filter(!grepl("Two races including Some other race", label),
!grepl("Two races excluding Some other race, and three or more races", label),
!grepl("!!Hispanic or Latino:!!", label)) %>%
mutate(race = case_when(grepl("^.*!White alone", label) ~ "White",
grepl("^.*!Black or African American alone", label) ~ "Black",
grepl("^.*!American Indian and Alaska Native alone", label) ~ "American Indian and Alaska Native",
grepl("^.*!Asian alone", label) ~ "Asian",
grepl("^.*!Native Hawaiian and Other Pacific Islander alone", label) ~ "Native Hawaiian and Other Pacific Islander",
grepl("^.*!Some other race alone", label) ~ "Some Other Race",
grepl("^.*!Two or more races:", label) ~ "Two or more races",
grepl("Estimate!!Total:!!Hispanic or Latino:", label) ~ "Hispanic or Latinx",
grepl("Estimate!!Total:!!Not Hispanic or Latino:", label) ~ "",
!is.na(label) ~ "")) %>%
filter(!race == "")
B03002$name <- gsub(" County", "", B03002$name)
# Group by County & R/E, order
table01 <- B03002 %>%
group_by(name,race) %>%
reframe(estimate = estimate,
moe = moe,
rr = reliability) %>%
pivot_wider(names_from = name, values_from = estimate|moe|rr) %>%
select(all_of(table_order))
# Export
file_name <- paste(export_vector, collapse = "_")
file_name <- paste(file_name, ".csv", sep = "")
write.csv(table01, file = file.path(export_path, file_name), row.names = FALSE)
# Summarize by race/ethnicity
B03002 <- B03002_raw %>%
filter(!grepl("Two races including Some other race", label),
!grepl("Two races excluding Some other race, and three or more races", label),
!grepl("!!Hispanic or Latino:!!", label)) %>%
mutate(race = case_when(grepl("^.*!White alone", label) ~ "White",
grepl("^.*!Black or African American alone", label) ~ "Black",
grepl("^.*!American Indian and Alaska Native alone", label) ~ "American Indian and Alaska Native",
grepl("^.*!Asian alone", label) ~ "Asian",
grepl("^.*!Native Hawaiian and Other Pacific Islander alone", label) ~ "Native Hawaiian and Other Pacific Islander",
grepl("^.*!Some other race alone", label) ~ "Some Other Race",
grepl("^.*!Two or more races:", label) ~ "Two or more races",
grepl("Estimate!!Total:!!Hispanic or Latino:", label) ~ "Hispanic or Latinx",
!is.na(label) ~ "")) %>%
filter(!race == "")
View(B03002)
B03002$name <- gsub(" County", "", B03002$name)
B03002$name <- gsub(" County", "", B03002$name)
View(B03002)
table01 <- B03002 %>%
group_by(name,race) %>%
reframe(estimate = estimate,
moe = moe,
rr = reliability) %>%
pivot_wider(names_from = name, values_from = estimate|moe|rr) %>%
select(all_of(table_order))
View(table01)
# TITLE: 2024 Demographic Profile - Table 01 - Population by Race
# GEOGRAPHIES: County & PSRC Region
# DATA SOURCE: ACS Data
# LAST EDITED: 2.29.2024
# AUTHOR: Eric Clute
# Assumptions
library(psrccensus)
library(tidycensus)
library(tidyverse)
year <- (2022)
acs_type <- "acs1"
export_vector <- c("export", year, acs_type)
export_path <- "Y:/Demog Profile/2024/Data/Table-01-pop-by-race"
table_order <- c("race",
"estimate_Region","moe_Region", "rr_Region",
"estimate_King", "moe_King", "rr_King",
"estimate_Kitsap", "moe_Kitsap", "rr_Kitsap",
"estimate_Pierce", "moe_Pierce", "rr_Pierce",
"estimate_Snohomish", "moe_Snohomish", "rr_Snohomish")
# Pull Data
B03002_raw <- get_acs_recs(geography = 'county',
table.names = c('B03002'),
years = year,
counties = c("King", "Kitsap", "Pierce", "Snohomish"),
acs.type = acs_type)
# Summarize by race/ethnicity
B03002 <- B03002_raw %>%
filter(!grepl("Two races including Some other race", label),
!grepl("Two races excluding Some other race, and three or more races", label),
!grepl("!!Hispanic or Latino:!!", label)) %>%
mutate(race = case_when(grepl("^.*!White alone", label) ~ "White",
grepl("^.*!Black or African American alone", label) ~ "Black",
grepl("^.*!American Indian and Alaska Native alone", label) ~ "American Indian and Alaska Native",
grepl("^.*!Asian alone", label) ~ "Asian",
grepl("^.*!Native Hawaiian and Other Pacific Islander alone", label) ~ "Native Hawaiian and Other Pacific Islander",
grepl("^.*!Some other race alone", label) ~ "Some Other Race",
grepl("^.*!Two or more races:", label) ~ "Two or more races",
grepl("Estimate!!Total:!!Hispanic or Latino:", label) ~ "Hispanic or Latinx",
!is.na(label) ~ "")) %>%
filter(!race == "")
B03002$name <- gsub(" County", "", B03002$name)
# Group by County & R/E, order
table01 <- B03002 %>%
group_by(name,race) %>%
reframe(estimate = estimate,
moe = moe,
rr = reliability) %>%
pivot_wider(names_from = name, values_from = estimate|moe|rr) %>%
select(all_of(table_order))
View(table01)
View(B03002)
View(B03002)
View(B03002_raw)
# Summarize by race/ethnicity
B03002 <- B03002_raw %>%
filter(!grepl("Two races including Some other race", label),
!grepl("Two races excluding Some other race, and three or more races", label),
!grepl("!!Hispanic or Latino:!!", label)) %>%
mutate(race = case_when(grepl("^.*!White alone", label) ~ "White",
grepl("^.*!Black or African American alone", label) ~ "Black",
grepl("^.*!American Indian and Alaska Native alone", label) ~ "American Indian and Alaska Native",
grepl("^.*!Asian alone", label) ~ "Asian",
grepl("^.*!Native Hawaiian and Other Pacific Islander alone", label) ~ "Native Hawaiian and Other Pacific Islander",
grepl("^.*!Some other race alone", label) ~ "Some Other Race",
grepl("^.*!Two or more races:", label) ~ "Two or more races",
grepl("Estimate!!Total:!!Hispanic or Latino:", label) ~ "Hispanic or Latinx",
grepl("Estimate!!Total:", label) ~ "Total",
!is.na(label) ~ "")) %>%
filter(!race == "")
# Summarize by race/ethnicity
B03002 <- B03002_raw %>%
filter(!grepl("Two races including Some other race", label),
!grepl("Two races excluding Some other race, and three or more races", label),
!grepl("!!Hispanic or Latino:!!", label)) %>%
mutate(race = case_when(grepl("^.*!White alone", label) ~ "White",
grepl("^.*!Black or African American alone", label) ~ "Black",
grepl("^.*!American Indian and Alaska Native alone", label) ~ "American Indian and Alaska Native",
grepl("^.*!Asian alone", label) ~ "Asian",
grepl("^.*!Native Hawaiian and Other Pacific Islander alone", label) ~ "Native Hawaiian and Other Pacific Islander",
grepl("^.*!Some other race alone", label) ~ "Some Other Race",
grepl("^.*!Two or more races:", label) ~ "Two or more races",
grepl("Estimate!!Total:!!Hispanic or Latino:", label) ~ "Hispanic or Latinx",
grepl("Estimate!!Total:", label) ~ "Total",
grepl("Estimate!!Total:!!Not Hispanic or Latino:", label) ~ "",
!is.na(label) ~ "")) %>%
filter(!race == "")
rm(B03002)
# Summarize by race/ethnicity
B03002 <- B03002_raw %>%
filter(!grepl("Two races including Some other race", label),
!grepl("Two races excluding Some other race, and three or more races", label),
!grepl("!!Hispanic or Latino:!!", label)) %>%
mutate(race = case_when(grepl("^.*!White alone", label) ~ "White",
grepl("^.*!Black or African American alone", label) ~ "Black",
grepl("^.*!American Indian and Alaska Native alone", label) ~ "American Indian and Alaska Native",
grepl("^.*!Asian alone", label) ~ "Asian",
grepl("^.*!Native Hawaiian and Other Pacific Islander alone", label) ~ "Native Hawaiian and Other Pacific Islander",
grepl("^.*!Some other race alone", label) ~ "Some Other Race",
grepl("^.*!Two or more races:", label) ~ "Two or more races",
grepl("Estimate!!Total:!!Hispanic or Latino:", label) ~ "Hispanic or Latinx",
grepl("Estimate!!Total:", label) ~ "Total",
grepl("Estimate!!Total:!!Not Hispanic or Latino:", label) ~ "",
!is.na(label) ~ "")) %>%
filter(!race == "")
View(B03002)
# Summarize by race/ethnicity
B03002 <- B03002_raw %>%
filter(!grepl("Two races including Some other race", label),
!grepl("Two races excluding Some other race, and three or more races", label),
!grepl("!!Hispanic or Latino:!!", label)) %>%
mutate(race = case_when(grepl("^.*!White alone", label) ~ "White",
grepl("^.*!Black or African American alone", label) ~ "Black",
grepl("^.*!American Indian and Alaska Native alone", label) ~ "American Indian and Alaska Native",
grepl("^.*!Asian alone", label) ~ "Asian",
grepl("^.*!Native Hawaiian and Other Pacific Islander alone", label) ~ "Native Hawaiian and Other Pacific Islander",
grepl("^.*!Some other race alone", label) ~ "Some Other Race",
grepl("^.*!Two or more races:", label) ~ "Two or more races",
grepl("Estimate!!Total:!!Hispanic or Latino:", label) ~ "Hispanic or Latinx",
grepl("^.*!Estimate!!Total:", label) ~ "Total",
# grepl("Estimate!!Total:!!Not Hispanic or Latino:", label) ~ "",
!is.na(label) ~ "")) %>%
filter(!race == "")
# Summarize by race/ethnicity
B03002 <- B03002_raw %>%
filter(!grepl("Two races including Some other race", label),
!grepl("Two races excluding Some other race, and three or more races", label),
!grepl("!!Hispanic or Latino:!!", label)) %>%
mutate(race = case_when(grepl("^.*!White alone", label) ~ "White",
grepl("^.*!Black or African American alone", label) ~ "Black",
grepl("^.*!American Indian and Alaska Native alone", label) ~ "American Indian and Alaska Native",
grepl("^.*!Asian alone", label) ~ "Asian",
grepl("^.*!Native Hawaiian and Other Pacific Islander alone", label) ~ "Native Hawaiian and Other Pacific Islander",
grepl("^.*!Some other race alone", label) ~ "Some Other Race",
grepl("^.*!Two or more races:", label) ~ "Two or more races",
grepl("Estimate!!Total:!!Hispanic or Latino:", label) ~ "Hispanic or Latinx",
#                         grepl("Estimate!!Total:", label) ~ "Total",
grepl("^.*!Estimate!!Total:!!Not Hispanic or Latino:", label) ~ "",
!is.na(label) ~ "")) %>%
filter(!race == "")
rm(B03002)
# Summarize by race/ethnicity
B03002 <- B03002_raw %>%
filter(!grepl("Two races including Some other race", label),
!grepl("Two races excluding Some other race, and three or more races", label),
!grepl("!!Hispanic or Latino:!!", label)) %>%
mutate(race = case_when(grepl("^.*!White alone", label) ~ "White",
grepl("^.*!Black or African American alone", label) ~ "Black",
grepl("^.*!American Indian and Alaska Native alone", label) ~ "American Indian and Alaska Native",
grepl("^.*!Asian alone", label) ~ "Asian",
grepl("^.*!Native Hawaiian and Other Pacific Islander alone", label) ~ "Native Hawaiian and Other Pacific Islander",
grepl("^.*!Some other race alone", label) ~ "Some Other Race",
grepl("^.*!Two or more races:", label) ~ "Two or more races",
grepl("Estimate!!Total:!!Hispanic or Latino:", label) ~ "Hispanic or Latinx",
#                         grepl("Estimate!!Total:", label) ~ "Total",
grepl("^.*!Estimate!!Total:!!Not Hispanic or Latino:", label) ~ "",
!is.na(label) ~ "")) %>%
filter(!race == "")
View(B03002)
library(tidyverse)
library(tidyr)
library(readxl)
library(data.table)
library(magrittr)
library(stringr)
library(dplyr)
library(odbc)
library(DBI)
library(openxlsx)
setwd("C:/Users/eclute/GitHub/irhd")
remotes::install_github("slu-openGIS/postmastr")
elmer_connection <- dbConnect(odbc::odbc(),
driver = "SQL Server",
server = "AWS-PROD-SQL\\Sockeye",
database = "Elmer",
trusted_connection = "yes")
